```python
#4.3使用数组进行面向数据编程
```


```python
import numpy as np
```


```python
points = np.arange(-5,5,0.01) # 1000 equally spaced points
```


```python
xs, ys = np.meshgrid(points,points)
```


```python
ys
```




    array([[-5.  , -5.  , -5.  , ..., -5.  , -5.  , -5.  ],
           [-4.99, -4.99, -4.99, ..., -4.99, -4.99, -4.99],
           [-4.98, -4.98, -4.98, ..., -4.98, -4.98, -4.98],
           ...,
           [ 4.97,  4.97,  4.97, ...,  4.97,  4.97,  4.97],
           [ 4.98,  4.98,  4.98, ...,  4.98,  4.98,  4.98],
           [ 4.99,  4.99,  4.99, ...,  4.99,  4.99,  4.99]])




```python
z = np.sqrt(xs**2+ys**2)
```


```python
z
```




    array([[7.07106781, 7.06400028, 7.05693985, ..., 7.04988652, 7.05693985,
            7.06400028],
           [7.06400028, 7.05692568, 7.04985815, ..., 7.04279774, 7.04985815,
            7.05692568],
           [7.05693985, 7.04985815, 7.04278354, ..., 7.03571603, 7.04278354,
            7.04985815],
           ...,
           [7.04988652, 7.04279774, 7.03571603, ..., 7.0286414 , 7.03571603,
            7.04279774],
           [7.05693985, 7.04985815, 7.04278354, ..., 7.03571603, 7.04278354,
            7.04985815],
           [7.06400028, 7.05692568, 7.04985815, ..., 7.04279774, 7.04985815,
            7.05692568]])




```python
##二维数组可视化matplotlib
```


```python
import matplotlib.pyplot as plt
```


```python
plt.imshow(z, cmap=plt.cm.gray); plt.colorbar()
plt.title("Image plot of $\sqrt{x**2+y**2}$ for a grid of value")
```




    Text(0.5, 1.0, 'Image plot of $\\sqrt{x**2+y**2}$ for a grid of value')




    
![png](output_9_1.png)
    



```python
##4.3.1将条件逻辑作为数组操作
```


```python
xarr = np.array([1.1,1.2,1.3,1.4,1.5])
```


```python
yarr = np.array([2.1,2.2,2.3,2.4,2.5])
```


```python
cond = np.array([True,False,True,True,False])
result = [(x if c else y)
    for x,y,c in zip (xarr,yarr,cond)]
result
```




    [1.1, 2.2, 1.3, 1.4, 2.5]




```python
result=np.where(cond,xarr,yarr)
```


```python
result
```




    array([1.1, 2.2, 1.3, 1.4, 2.5])




```python
arr = np.random.randn(4,4)
```


```python
arr
```




    array([[ 0.86618604,  1.30122159, -0.79573045,  0.02643498],
           [-0.10724906,  0.09370098,  0.22648871, -1.06098977],
           [-0.65100236, -0.15129349, -1.05505411,  0.05924547],
           [-1.04795291,  1.17302339,  2.0853006 ,  0.44944072]])




```python
arr>0
```




    array([[ True,  True, False,  True],
           [False,  True,  True, False],
           [False, False, False,  True],
           [False,  True,  True,  True]])




```python
np.where(arr>1,1,-1)
```




    array([[-1,  1, -1, -1],
           [-1, -1, -1, -1],
           [-1, -1, -1, -1],
           [-1,  1,  1, -1]])




```python
###where 选择替换
```


```python
##4.3.2数学和统计方法
```


```python
arr1 = np.random.randn(5,4)
```


```python
arr1.mean()
```




    0.10347563741138774




```python
np.mean(arr1)
```




    0.10347563741138774




```python
np.sum(arr1)
```




    2.069512748227755




```python
arr1
```




    array([[ 1.09322164,  1.35514621, -1.03384553,  1.27301386],
           [ 2.09605918,  1.32644226,  0.3749041 ,  0.35348817],
           [ 0.35611084, -0.25641592, -0.1697214 , -1.66280271],
           [-1.42089871,  0.11276421,  0.51160477, -0.39371871],
           [-0.75691724,  0.66403743, -1.68345627, -0.06950343]])




```python
###axis表示计算一行上的值
```


```python
arr1.mean(axis=1)
```




    array([ 0.67188404,  1.03772343, -0.4332073 , -0.29756211, -0.46145988])




```python
arr1.sum(axis=0)  ###=0表示每一列求
```




    array([ 1.36757571,  3.20197419, -2.00051433, -0.49952283])




```python
arr2 = np.array([[0,1,2],[3,4,5],[6,7,8]])
```


```python
arr2
```




    array([[0, 1, 2],
           [3, 4, 5],
           [6, 7, 8]])




```python
arr2.cumsum(axis=0)
```




    array([[ 0,  1,  2],
           [ 3,  5,  7],
           [ 9, 12, 15]], dtype=int32)




```python
###cumsun纵向每一行每一行相加,不给值会默认为一列数组
```


```python
arr2.cumprod(axis = 1)  ###沿着行累计乘
```




    array([[  0,   0,   0],
           [  3,  12,  60],
           [  6,  42, 336]], dtype=int32)




```python
##4.3.3布尔值数组的方法
```


```python
arr3 = np.random.randn(100)
```


```python
(arr3>0).sum()
```




    40




```python
arr3
```




    array([-0.49730917,  0.01724686, -1.1110669 , -2.5910068 , -0.39173357,
           -2.083168  , -1.35360556, -0.01094767, -1.57829668,  0.814124  ,
            0.87217392,  1.72849943,  0.25780619,  0.60753334, -0.22760607,
           -0.77720297, -1.68187989,  0.02734368, -0.21283025,  0.7319559 ,
           -1.96536729, -0.04436012, -1.17200425, -0.67579949,  0.63838665,
            1.02147925,  0.9228366 , -0.99425397,  1.01440057,  0.9347645 ,
           -0.26531667, -1.79912395,  0.8790308 , -0.34562044, -0.52694969,
           -1.50501709, -2.7988547 , -0.74874636,  0.55322955,  1.34551499,
           -1.90347243, -0.60327002, -0.90021906, -1.68805824,  0.84649555,
           -1.39967516,  0.50349464,  0.93064173,  0.72172206, -0.49840026,
           -1.87106028,  1.11653981,  0.52169632, -1.87796063, -0.22853282,
           -0.10943797, -0.86226125,  1.05015009, -0.58507972, -1.97244969,
           -0.22743443, -1.04376039, -0.10727077, -0.93259718,  0.43699335,
            0.57289002,  0.31584504, -0.86553526,  1.83733577,  0.24672539,
           -1.67862384,  0.0375638 ,  1.5176263 , -1.9517803 ,  0.14538759,
           -0.14639525,  0.95775767, -2.70742718, -1.51411063,  0.16782423,
           -1.60034874, -1.35011782,  0.01541757, -1.23211072, -0.31799946,
           -1.07717865, -0.52489186, -1.20030868, -0.0378975 , -2.24757615,
           -1.4888236 , -0.39122904,  0.19154313,  0.16905985,  0.47137096,
            0.85136001,  1.72285394,  0.57993511, -0.74074587, -0.20503054])




```python
bools = np.array([False,False,True,False])
```


```python
bools.any()
```




    True




```python
bools.all()
```




    False




```python
###any有一为true，all全为true才为true
```


```python
##4.3.4排序
```


```python
arr4 = np.random.randn(6)
```


```python
arr4
```




    array([-0.4438537 ,  1.36673362, -1.18045078,  1.20016894, -0.45965131,
           -1.25240255])




```python
arr4.sort()###sort排序
```


```python
arr4
```




    array([-1.25240255, -1.18045078, -0.45965131, -0.4438537 ,  1.20016894,
            1.36673362])




```python
arr5 = np.random.randn(5,3)
```


```python
arr5
```




    array([[ 1.22860233, -0.07356193, -0.41021918],
           [ 0.25739873,  0.26517568,  0.68396648],
           [ 2.13133779, -0.46355272,  0.45770633],
           [-0.56144416, -0.17452087, -0.31430869],
           [ 0.15889375, -0.96511481,  1.23223367]])




```python
arr5.sort(1)###沿着横轴排序
```


```python
arr5
```




    array([[-0.41021918, -0.07356193,  1.22860233],
           [ 0.25739873,  0.26517568,  0.68396648],
           [-0.46355272,  0.45770633,  2.13133779],
           [-0.56144416, -0.31430869, -0.17452087],
           [-0.96511481,  0.15889375,  1.23223367]])




```python
large_arr = np.random.randn(100)
```


```python
large_arr.sort()
```


```python
large_arr[int(0.05*len(large_arr))]#5%  ###从小到大，取第五个数字
```




    -1.6869204178167445




```python
##4.3.5唯一值与其他集合逻辑
```


```python
#unique(x),计算唯一值，并排序
#interswct1d（x，y）计算x和y交集
#union1d（x，y）并集
#in1d(x,y)计算x中元素是否在y中
```


```python
asd = np.array([4,5,48,7,6,1,34,])
asdf = np.array([5,7,6,13,4,6,43])
```


```python
np.intersect1d(asd,asdf)
```




    array([4, 5, 6, 7])


